{{ define "footerfiles" }}
<script id="dsq-count-scr" src="https://thatrocketx.disqus.com/count.js" async></script>
<script type="application/javascript">
	//External
function targetBlank() {
  // remove subdomain of current site's url and setup regex
  var internal = location.host.replace("www.", "");
      internal = new RegExp(internal, "i");
  var a = document.getElementsByTagName('a'); // then, grab every link on the page
  for (var i = 0; i < a.length; i++) {
    var href = a[i].host; // set the host of each link
    if( !internal.test(href) ) { // make sure the href doesn't contain current site's host
      a[i].setAttribute('target', '_blank'); // if it doesn't, set attributes
	a[i].setAttribute('rel', 'noopener');
    }
  }
};
targetBlank();
</script>
{{ end }}
{{ define "main" }}
{{ if .IsTranslated }}
  <nav class="lingue-lista">
  {{ range .Translations }}
      <ul>
        <li><a href="{{ .Permalink }}" lang="{{ .Language.Lang }}">{{ .Language.LanguageName }}</a></li>
    </ul>
  {{ end}}
  </nav>
{{ end }}
<div class="row">
<div class="col-lg-9 {{ if not (isset .Params "autore") }}mx-auto{{end}}">
<article class="contenuto" lang="{{ .Language.Lang }}" role="article" itemscope itemtype="http://schema.org/Article">
<meta itemprop='inLanguage' content='{{ .Site.LanguageCode }}'/>
<meta itemprop='about' content='{{ .Description }}' />
<header role="banner" class="jumbotron dark-bg-dark">
  <div class="text-center">
  <h1 class="h3 pb-2 border-bottom border-primary animated fadeInUp" itemprop="name headline">{{ .Title }}</h1>
  <h2 class="lead flipboard -subtitle" itemprop="subheading">{{if (isset .Params "sottotitolo")}} {{.Params.sottotitolo}} {{else}}{{ .Description }} {{end}}</h2>
  {{ $readingtime := .ReadingTime }}
  {{ $readingtimeone := 1 }}
  <figure class="immagine-principale" role="group" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <img  itemprop="image" src="{{ if (isset .Params "immagineprincipale") }}{{ .Params.immagineprincipale }}{{ else }}{{ .Params.immagine }}{{ end }}" alt="{{ .Params.descrizioneimg }}" class="immagine-articolo">
    <figcaption itemprop="caption">{{ .Params.descrizioneimg }}</figcaption>
    </figure>
</div>
    <div class="text-center border p-2">
      {{ if (isset .Params "autore") }}<img src="/icons/silhouette.svg" width="20" class="d-inline-block"> <span itemprop="author" class="autore" title="{{ T "autoreinf"}}">{{ .Params.autore }}</span><span class="tempo-lettura-tempo"><span class="separatore"></span> <img src="/icons/clock.svg" width="20" class="d-inline-block"><span class="tempo-lettura" role="img" aria-label="{{ T "tempo_lettura"}}" title="{{ T "tempo_lettura"}}"><span class="sr-only">{{ T "tempo_lettura"}}:</span></span> {{ .ReadingTime }} {{if eq $readingtime $readingtimeone}}{{T "lett_min"}}{{else}}{{ T "lett_mins"}}{{end}}</span><span class="separatore"></span> <img src="/icons/bubble.svg" width="20" class="d-inline-block"> <div class="d-inline-block"><a class="noext badge badge-secondary mx-2 text-white" onclick="showDisqus()" href="{{ .Permalink }}#disqus_thread">{{T "vaiaicommenti"}}</a></div>{{ end }}
      <div class="text-muted dark-text-muted">{{ if (isset .Params "lastmod") }}{{ T "ultima-modifica"}} <time datetime="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" itemprop="dateModified">
       {{- .Lastmod.Format "2/1/2006" -}}</div>{{end}}</span>
    </div>
</header>
<div class="dark-text-white text-dark" itemprop="articleBody">
    {{.TableOfContents}}
    {{ .Content }}
</div>
  {{ if (isset .Params "date") }}<img src="/icons/calendar.svg" width="20" class="d-inline-block"> <time class="text-muted dark-text-muted" itemprop="datePublished" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" title="{{ T "datainf"}}">{{- .Date.Format "2/1/2006" -}}</time>{{ end }}

 <div class="my-3">
 {{ if (isset .Params "categories") }}<div>{{range .Params.categories}}<a href="{{ "/categories/" | relLangURL }}{{ . | urlize }}" class="badge badge-secondary bg-primary">{{ . }}</a> {{end}}</div>{{end}}
 {{ if (isset .Params "tags") }}<div>{{range .Params.tags}}<a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="badge badge-secondary bg-secondary">{{ . }}</a> {{end}}</div>{{ end }}
  </div>
</article>
</div>

{{ if (isset .Params "autore") }}
<aside class="col opacity5 opacity-remove-hover" id="sidebar">
	{{- partial "sidebar.html" . -}}
</aside>
{{ end }}

</div>

{{ if (isset .Params "autore") }}
<section class="dark-text-white" role="region">
  <div class= "info articolo">
    <div class="bg-light text-center p-4 m-2 border dark-bg-dark">
    <img src="/commenti.svg" width="50" height="50" class="d-inline-block float-left mr-4" alt="">
      <p class="h4 dark-text-white">{{ T "esortazionecommenti"}}</p><a href="#c" class="btn btn-primary" onclick="showDisqus()">{{T "vaiaicommenti"}}</a>
      </div>
      <div class="text-center mw-800 mx-auto my-2">
      {{- partial "condividi.html" . -}}
      </div>
    <h2 id="c">{{ T "commenti"}}</h2><br>
    {{ T "commentiinfo"}}
   <div class="disqus-comments">
    <div id="showcom" class="my-3">
    <button id="show-comments" type="button" class="btn btn-primary btn-lg w-100" onclick="showDisqus()">{{ T "leggi-i-commenti" }}</button>
    </div>
    <div id="disqus_thread"></div>
  </div>
  <script type="text/javascript">
    var disqus_config = function () {
      this.page.url = '{{ trim .Permalink "/" }}';
      this.page.title = '{{ .Title }}';
      this.page.identifier = '{{ .UniqueID }}';
    };
    function showDisqus() {
      var disqus = document.createElement('script');
      disqus.type = 'text/javascript';
      disqus.async = true;
      disqus.src = '//' + '{{.Site.DisqusShortname}}' + '.disqus.com/embed.js';
      document.body.appendChild(disqus);
      document.getElementById('showcom').remove();
    };
  </script>
{{ $related := .Site.RegularPages.Related . | first 2 }}
{{ with $related }}
<h2> {{ T "vedi-anche"}} </h2>
<div class="w-100 overflow-auto">
  <div class="w-700 mx-auto">
  {{ range . }}
  <div class="card my-2 rounded-lg mw-300 mnh-300 mx-auto overflow-hidden d-inline-block dark-bg-dark" aria-describedby="sommario">
    <a href="{{ .URL }}" class="no-underline">
      <div class="card-img-top overflow-hidden ">
        {{ if and (isset .Params "videoself") }}
        <video autoplay loop muted playsinline class="of-cover w-100 h-100 lazyloaded" poster="{{ .Params.immagine }}" data-src="{{ .Params.videoseo }}" tabindex="-1"></video>
        {{else}}
          {{ if (isset .Params "immagine") }}<img data-src="{{ .Params.immagine }}" class="of-cover w-100 h-100 lazyloaded" alt="" aria-describedby="sommario">{{end}}
          {{end}}
      </div>
      <div class="card-body">
          <h1 class="h5 text-dark dark-text-white">{{ .Title }}</h1>

            {{ if (isset .Params "categories") }}{{range .Params.categories}}<span class="badge badge-secondary">{{ . }}</span> {{ end }} {{ end }}
            {{ if (isset .Params "cities") }}<span class="badge badge-secondary">{{ .Params.cities }} </span>{{ end }}{{ if (isset .Params "countries") }} <span class="badge badge-secondary"> {{ .Params.countries }} </span> {{ end }}

      </div>
    </a>
  </div>
  {{ end }}
  </div>
  </div>
  </div>
{{ end }}
</section>
{{end}}
{{end}}
